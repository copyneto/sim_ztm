sap.ui.define(["sap/m/MessageToast","sap/ui/core/library","sap/ui/model/json/JSONModel","sap/m/PDFViewer","sap/ui/model/Filter","sap/m/MessageBox"],function(e,t,r,n,o,a){"use strict";var i=t.ValueState;return{onInit:function(){},onBeforeRendering:functio+
n(){this.getView().byId(this.byId("printPDF").getId()).setIcon("sap-icon://print");this.getView().byId(this.byId("printAMST").getId()).setIcon("sap-icon://print")},getPDFData:function(){let e=this.getView().byId("listReportFilter").getFilters();let t=thi+
s.templateBaseExtension.getExtensionAPI();for(let e of t.getSelectedContexts()){var r=e.getObject().OrdemFrete}var n=this.getView().getModel();let o=this.templateBaseExtension.getExtensionAPI().getSelectedContexts();return new Promise((e,t)=>{n.read("/PD+
F(p_ordemFrete='"+r+"')/Set",{success:function(t,r){e(t)},error:function(e){t(e)}})})},onPrintPDF:async function(e){let t=this.templateBaseExtension.getExtensionAPI();for(let e of t.getSelectedContexts()){var r=e.getObject().OrdemFrete}if(r==""||r==null)+
{a.error("Para extrair o relatório de Ordem de Carregamento é obrigatório informar uma Ordem de Frete.\nInforme a Ordem de Frete e tente novamente.")}else{var o=new n;this.getView().addDependent(o);var i=await this.getPDFData();if(i===""){a.error("Erro a+
o gerar PDF");return}let e=i.results[0].stream_data;let t=atob(e);let r=new Uint8Array(t.length);for(var s=0;s<t.length;s++){r[s]=t.charCodeAt(s)}var l=new Blob([r.buffer],{type:"application/pdf"});var d=URL.createObjectURL(l);jQuery.sap.addUrlWhitelist(+
"blob");o.setSource(d);o.setVisible(true);o.setTitle("Ordem de Carregamento");o.open()}},getAMSTData:function(){let e=this.getView().byId("listReportFilter").getFilters();let t=this.templateBaseExtension.getExtensionAPI();for(let e of t.getSelectedContex+
ts()){var r=e.getObject().OrdemFrete}var n=this.getView().getModel();let o=this.templateBaseExtension.getExtensionAPI().getSelectedContexts();return new Promise((e,t)=>{n.read("/AMST(p_ordemFrete='"+r+"')/Set",{success:function(t,r){e(t)},error:function(+
e){a.error("Não há envelope de amostra na Ordem de Frete "+r);t(e)}})})},onPrintAMST:async function(e){let t=this.templateBaseExtension.getExtensionAPI();for(let e of t.getSelectedContexts()){var r=e.getObject().OrdemFrete}if(r==""||r==null){a.error("Par+
a extrair o formulário de Amostragem é obrigatório informar uma Ordem de Frete.\nInforme a Ordem de Frete e tente novamente.")}else{var o=new n;this.getView().addDependent(o);var i=await this.getAMSTData();if(i.results[0].no_envelope==="X"){a.error("Não +
há envelope de amostra na Ordem de Frete "+r);return}else if(i===""){a.error("Erro ao gerar PDF");return}let e=i.results[0].stream_data;let t=atob(e);let g=new Uint8Array(t.length);for(var s=0;s<t.length;s++){g[s]=t.charCodeAt(s)}var l=new Blob([g.buffer+
],{type:"application/pdf"});var d=URL.createObjectURL(l);jQuery.sap.addUrlWhitelist("blob");o.setSource(d);o.setVisible(true);o.setTitle("Formulário de Amostragem");o.open()}}}});                                                                            
//# sourceMappingURL=ListReportExt.controller.js.map                                                                                                                                                                                                           